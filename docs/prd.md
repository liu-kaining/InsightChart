## **InsightChart AI - 智能图表生成器 产品需求文档 (PRD)**

| **文档版本** | **V1.0** |
| :--- | :--- |
| **项目名称** | InsightChart AI |
| **创建日期** | 2025年8月24日 |
| **创建人** | Gemini |
| **状态** | 初稿 |

-----

### **1. 产品概述 (Overview)**

#### **1.1 项目背景与愿景**

在数据驱动决策的时代，大量业务人员（如市场、销售、运营）和学生虽然拥有结构化数据（通常以Excel形式存在），但缺乏快速、有效地将数据转化为可视化洞察的能力。传统图表工具（如Excel自带图表）操作繁琐，需要用户手动选择数据、挑选图表类型并进行大量配置。本项目旨在解决这一痛痛，打造一款名为 **InsightChart AI** 的智能数据可视化工具。

**产品愿景**：成为最智能、最易用的数据可视化助手，让任何没有数据分析背景的用户都能在1分钟内从原始数据中获得美观、富有洞察力的图表。

#### **1.2 问题陈述**

  * **高门槛**：非技术用户不清楚哪种图表最适合展示他们的数据关系。
  * **低效率**：手动制作图表耗时费力，反复调整格式和数据范围的过程非常繁琐。
  * **洞察缺失**：传统工具只负责“画图”，而不会主动“解读”数据，帮助用户发现潜在的模式或趋势。

#### **1.3 解决方案**

InsightChart AI 通过集成先进的大语言模型（LLM），实现从数据到可视化的自动化流程。用户只需上传一个结构化的数据文件（如Excel），AI将自动完成以下工作：

1.  **理解数据**：解析数据结构、识别字段类型和潜在关系。
2.  **智能推荐**：基于数据特征，智能判断并推荐多种最合适的图表类型。
3.  **自动生成**：一键生成多个美观、配置完善的 ECharts 可视图表。
4.  **便捷导出**：提供简单的交互和下载功能。

### **2. 目标用户 (Target Audience)**

#### **2.1 用户画像 (Personas)**

  * **画像一：业务人员 (张伟，市场经理)**

      * **背景**: 32岁，负责市场活动策划与复盘。每周都需要整理活动数据（如渠道来源、用户增长、转化率等），并制作周报PPT。
      * **痛点**: “我懂业务，但每次做图表都很头疼。数据整理好了，却不知道用折线图还是柱状图更能说服老板。花在调整Excel图表格式上的时间比分析数据本身还多。”
      * **期望**: 希望有一个工具，把Excel扔进去就能自动出图，最好能直接用到PPT里。

  * **画像二：学生/研究人员 (李静，在校大学生)**

      * **背景**: 21岁，经济学专业。经常需要完成课程作业、论文，其中涉及大量的社会调查数据或经济数据分析。
      * **痛点**: “SPSS或Python虽然功能强大，但学习曲线陡峭。我只是想为我的论文快速生成几张核心的数据支撑图表，不想花几天去学一个复杂的软件。”
      * **期望**: 操作简单，能快速验证我对数据的几个猜想，并生成规范、美观的图表用于报告中。

### **3. 用户故事与场景 (User Stories & Scenarios)**

  * **US-01**: 作为一个**市场经理**，我**希望**能上传我的活动数据Excel文件，**以便**系统能自动给我生成关于渠道效果对比的柱状图和用户增长趋势的折线图，从而快速完成我的周报。
  * **US-02**: 作为一个**学生**，我**希望**上传我的问卷调查数据，**以便**系统能自动展示不同选项的占比（饼图）和不同人群的选择差异（分组柱状图），帮助我快速分析调查结果。
  * **US-03**: 作为一个**普通用户**，我**希望**在图表生成后，能轻松地将图表下载为高清图片，**以便**我能将其插入到我的PPT、Word文档或在线文章中。
  * **US-04**: 作为一个**对图表有基本要求的用户**，我**希望**生成的图表包含清晰的标题、图例和坐标轴标签，**以便**其他人能毫不费力地看懂图表内容。

### **4. 产品功能需求 (Product Features & Requirements)**

#### **4.1 核心功能 (MVP - Phase 1)**

| 功能ID | 功能名称 | 优先级 | 描述 |
| :--- | :--- | :--- | :--- |
| **F-01** | **文件上传模块** | **P0** | - 支持用户通过点击或拖拽方式上传文件。\<br\>- 支持 `.xlsx`, `.xls`, `.csv` 格式。\<br\>- 提供明确的文件大小限制（如 MVP 阶段限制为 5MB）。\<br\>- 上传过程中显示进度，并对不合规的文件格式或大小进行即时反馈。 |
| **F-02** | **AI数据分析与推荐引擎** | **P0** | - **[后端]** 文件上传成功后，后端服务能解析文件内容，提取表头、数据。\<br\>- **[后端]** 对数据进行预处理，生成包含列名、推断类型、数据样本等的摘要信息。\<br\>- **[后端]** 调用大语言模型（LLM），将数据摘要作为上下文，请求生成3-5个多样化且合适的 ECharts `option` JSON。\<br\>- **[后端]** 对LLM返回的JSON进行合法性校验，确保其可以被前端正确渲染。 |
| **F-03** | **可视化展示模块** | **P0** | - 在前端页面上，为每个由AI生成的 `option` JSON 动态创建一个图表容器。\<br\>- 使用 ECharts 库将 `option` 渲染为交互式图表。\<br\>- 多个图表以卡片式布局清晰地展示给用户，方便浏览和比较。 |
| **F-04** | **图表导出功能** | **P0** | - 每个生成的图表都应包含一个“下载”按钮。\<br\>- ECharts 的 `toolbox.feature.saveAsImage` 功能必须默认开启。\<br\>- 用户可以点击按钮将当前图表下载为 PNG 格式的图片。 |
| **F-05** | **用户界面与体验 (UI/UX)** | **P1** | - 整体界面设计简洁、直观，突出核心上传功能。\<br\>- 在AI分析期间（通常耗时5-15秒），必须有明确的加载动画和提示文案（如：“AI正在解读您的数据，请稍候…”），防止用户因等待而焦虑。\<br\>- 对于处理失败的情况（如文件损坏、AI服务超时），需要给出友好、清晰的错误提示。 |

#### **4.2 进阶功能 (Phase 2 / Future)**

| 功能ID | 功能名称 | 优先级 | 描述 |
| :--- | :--- | :--- | :--- |
| **F-06** | **交互式图表微调** | **P1** | - 在每个图表下方提供一个简单的输入框，允许用户通过自然语言对图表进行修改（如：“把标题改成‘年度销售额’”、“换成饼图”）。\<br\>- 后端需支持多轮对话，结合历史上下文理解用户意图并重新生成图表。 |
| **F-07** | **数据洞察与解读** | **P1** | - 除了生成图表，AI还需提供1-2句对图表的文字解读，帮助用户发现数据中的关键信息（如：“数据显示，第三季度的销售额增长最为显著”）。 |
| **F-08** | **支持更多图表类型** | **P2** | - 扩展AI的能力，以支持更复杂的图表，如散点图、热力图、地理地图、桑基图等。 |
| **F-09** | **仪表盘（Dashboard）模式** | **P2** | - 允许用户从AI推荐的多个图表中挑选2-4个，组合成一个简单的仪表盘视图，并支持整个仪表盘的导出。 |
| **F-10** | **用户账户与历史记录** | **P2** | - 引入用户登录系统，允许用户保存上传过的文件和生成过的图表，方便回顾和再次编辑。 |

### **5. 用户流程与线框图 (User Flow & Wireframes)**

#### **5.1 核心用户流程**

1.  **进入首页**: 用户打开 InsightChart AI 网站，看到一个醒目的文件上传区域和简短的产品介绍。
2.  **上传文件**:
      * 用户点击“上传文件”按钮或将文件拖拽到指定区域。
      * 系统弹出文件选择器，用户选择本地的 Excel 或 CSV 文件。
      * 文件开始上传，界面显示上传进度条。
3.  **AI分析与等待**:
      * 上传成功后，界面切换到加载状态，显示“AI分析中…”的动画和提示。
      * 此时前端已将文件发送至后端，后端正在执行数据处理和LLM调用。
4.  **查看结果**:
      * 分析完成后，加载动画消失，页面展示出3-5个由AI生成的图表卡片。
      * 每个卡片都包含一个完整的图表和一个“下载”按钮。
5.  **交互与导出**:
      * 用户可以滚动浏览所有推荐的图表。
      * 用户将鼠标悬停在图表上可以查看详细数据。
      * 用户点击任一图表的“下载”按钮，即可将该图表保存为图片。

#### **5.2 错误处理流程**

  * **文件格式/大小错误**: 用户选择不被支持的文件或超大文件时，前端立刻弹出提示：“文件格式不支持，请上传 .xlsx, .xls, .csv 文件” 或 “文件大小超过5MB限制”。
  * **后端处理失败**: 若后端在解析文件或调用AI时发生错误，前端加载状态结束后，会显示一个错误提示框：“哎呀，图表生成失败了。请检查您的文件内容是否规整，或稍后再试。”

### **6. 非功能性需求 (Non-functional Requirements)**

  * **性能 (Performance)**: 从用户上传文件成功到前端展示出图表的端到端时间，应控制在平均15秒以内。
  * **兼容性 (Compatibility)**: 产品应在最新版本的 Chrome, Firefox, Safari, Edge 浏览器上表现一致。
  * **安全性 (Security)**: 用户上传的数据仅用于当次图表生成，处理后即时从服务器删除，绝不存储用户数据，并需在隐私政策中明确说明。
  * **可扩展性 (Scalability)**: 后端服务应能水平扩展，以应对未来用户量的增长。LLM调用应设计有熔断和重试机制。

### **7. 成功指标 (Success Metrics)**

  * **用户激活率**: 上传文件并成功生成图表的用户数 / 访问网站的总用户数。目标：\> 30%。
  * **核心功能使用率**: 成功生成图表的会话中，至少下载一张图表的会话比例。目标：\> 70%。
  * **用户留存率**: 次周回访用户比例。目标：\> 10%。
  * **用户满意度**: 通过NPS（净推荐值）或简单的“这个工具有用吗？”的反馈调查来衡量。

### **8. 假设与依赖 (Assumptions & Dependencies)**

  * **假设**:
      * 用户上传的数据是基本的、二维的结构化数据，没有复杂的合并单元格或多工作表（Sheet）关联。
      * 用户有能力判断AI生成的图表是否符合其真实意图。
  * **依赖**:
      * 项目强依赖于第三方大语言模型API（如OpenAI GPT系列或Google Gemini系列）的稳定性和性能。
      * API的调用成本将是项目运营的主要成本之一。



### **9. 技术选型建议 (Recommended Technical Stack)**

本章节旨在为开发团队提供一套经过考量的技术栈建议。此选型综合考虑了开发效率、社区支持、性能、可扩展性以及与项目核心功能（数据处理、AI集成）的契合度。

| **类别** | **技术/工具** | **选择理由** |
| :--- | :--- | :--- |
| **前端 (Frontend)** | **Vue.js 3** 或 **React** | - **组件化开发**：两者都是业界领先的框架，适合构建可复用、易维护的UI组件。Vue.js 上手曲线更平缓，React 生态更庞大，可根据团队熟悉度选择。\<br\>- **高互动性**：非常适合构建本项目所需的高度动态和响应式的单页应用（SPA）。 |
| | **Apache ECharts** | - **核心可视化库**：这是项目的指定库，功能强大，文档完善，支持丰富的图表类型和交互，能完美承接AI生成的配置。\<br\>- **声明式API**：其 `setOption` 机制与AI生成JSON配置的模式天然契合。 |
| | **TypeScript** | - **代码健壮性**：为JavaScript提供静态类型检查，能在开发阶段发现大量潜在错误，提升代码质量和长期可维护性。\<br\>- **开发体验**：提供更好的代码提示和重构支持。 |
| **后端 (Backend)** | **Flask (Python)** | - **轻量与灵活**：对于以API为核心的服务而言，Flask非常轻量，没有过多冗余功能，启动快速，开发灵活。\<br\>- **Python生态**：这是最重要的原因。后端的核心任务是数据处理和AI调用，使用Python框架可以无缝集成Pandas、OpenAI/Google等核心库，无需跨语言调用的开销和复杂性。 |
| | **Python 3.9+** | - **语言基础**：现代Python版本，拥有成熟的异步支持和丰富的第三方库，是数据科学和AI应用的首选语言。 |
| **数据处理** | **Pandas** | - **行业标准**：Python数据处理的基石。能轻松、高效地读取、清洗和分析Excel/CSV文件，为AI提供格式化的输入。\<br\>- **依赖库**：需配合 `openpyxl` (用于.xlsx) 或 `xlrd` 使用。 |
| **核心AI/LLM** | **OpenAI API (GPT-4o/GPT-4-Turbo)** 或 **Google AI (Gemini 1.5 Pro/Flash)** | - **模型能力**：当前最顶尖的商用LLM，具备强大的代码生成（特别是JSON）、逻辑推理和遵循指令的能力，是保证图表推荐质量的关键。\<br\>- **易于集成**：提供稳定、成熟的RESTful API和官方Python SDK，集成工作量小。\<br\>- **特性支持**：如 OpenAI 的 JSON Mode，能强制模型输出合法的JSON，极大降低后端校验和重试的复杂性。 |
| **部署 (Deployment)** | **Docker** | - **环境一致性**：通过容器化打包整个应用（Flask后端），确保开发、测试、生产环境完全一致，避免“在我电脑上是好的”问题。\<br\>- **部署灵活性**：可以轻松部署到任何支持Docker的云平台。 |
| | **PaaS平台 (如 Render, Heroku)** 或 **云服务器 (如 AWS EC2, DigitalOcean)** | - **快速启动 (PaaS)**：对于MVP阶段，PaaS平台能自动化部署流程，让团队专注于代码本身。Render对Docker的支持非常友好。\<br\>- **灵活扩展 (云服务器)**：当应用需要更多自定义配置或面临更大流量时，可以迁移到传统的云服务器上，配合Gunicorn/Nginx进行高性能部署。 |
| **版本控制** | **Git / GitHub / GitLab** | - **行业标准**：用于代码的版本管理和团队协作。 |
